<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>lua-cassandra documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>lua-cassandra</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
</ul>


<h2>Modules</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../modules/cassandra.lua.html">cassandra.lua</a></li>
  <li><strong>session.lua</strong></li>
</ul>
<h2>Examples</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../examples/batch.lua.html">batch.lua</a></li>
  <li><a href="../examples/pagination.lua.html">pagination.lua</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>session.lua</code></h1>
<p>This module provides a Session to interact with a Cassandra cluster.</p>
<p> A session must be opened, can be reused and closed once you're done with it.
 In the context of Nginx, a session used the underlying cosocket API which allows
 one to put a socket in the connection pool, before reusing it later. Otherwise,
 we fallback on luasocket as the underlying socket implementation.</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#connect">connect (contact_points, port)</a></td>
	<td class="summary">Connect a session to a node coordinator.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#close">close ()</a></td>
	<td class="summary">Close a connected session.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#execute">execute (operation, args, options)</a></td>
	<td class="summary">Execute an operation (query, prepared statement, batch statement).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#set_keyspace">set_keyspace (keyspace)</a></td>
	<td class="summary">Set a keyspace for that session.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#prepare">prepare (query, tracing)</a></td>
	<td class="summary">Prepare a query.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "connect"></a>
    <strong>connect (contact_points, port)</strong>
    </dt>
    <dd>
    Connect a session to a node coordinator.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">contact_points</span>

<p> A string or an array of strings containing the IP addresse(s) to connect to.</p>
<pre><code>                   Strings can be of the form "host:port" if some nodes are running on another
                   port than the specified or default one.
</code></pre>

        </li>
        <li><span class="parameter">port</span>

<pre><code>       Default: 9042. The port on which to connect to.
</code></pre>

        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        connected     A boolean indicating the success of the connection.</li>
        <li>
        err           Any server/client error encountered during the connection.</li>
    </ol>

    <h3>Raises:</h3>
    Any error due to a wrong usage of the driver.



</dd>
    <dt>
    <a name = "close"></a>
    <strong>close ()</strong>
    </dt>
    <dd>
    Close a connected session.
 Wrapper around the cosocket (or luasocket) <code>:close()</code>.



    <h3>Returns:</h3>
    <ol>

        The underlying closing result from tcpsock or luasocket
    </ol>

    <h3>Raises:</h3>
    Any error due to a wrong usage of the driver.

    <h3>See also:</h3>
    <ul>
    </ul>


</dd>
    <dt>
    <a name = "execute"></a>
    <strong>execute (operation, args, options)</strong>
    </dt>
    <dd>
    Execute an operation (query, prepared statement, batch statement).


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">operation</span>
         The operation to execute. Whether it being a plain string query, a prepared statement or a batch.
        </li>
        <li><span class="parameter">args</span>

<pre><code>  (Optional) An array of arguments to bind to the operation if it is a query or a statement.
</code></pre>

        </li>
        <li><span class="parameter">options</span>
           (Optional) A table of options for this query.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        response  The parsed response from Cassandra.</li>
        <li>
        err       Any error encountered during the execution.</li>
    </ol>




</dd>
    <dt>
    <a name = "set_keyspace"></a>
    <strong>set_keyspace (keyspace)</strong>
    </dt>
    <dd>
    Set a keyspace for that session.
 Execute a "USE keyspace_name" query.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">keyspace</span>
         Name of the keyspace to use.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Reseulf from execute().
    </ol>




</dd>
    <dt>
    <a name = "prepare"></a>
    <strong>prepare (query, tracing)</strong>
    </dt>
    <dd>
    Prepare a query.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">query</span>
         The query to prepare.
        </li>
        <li><span class="parameter">tracing</span>
         A boolean indicating if the preparation of this query should be traced.
        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.3</a></i>
<i style="float:right;">Last updated 2015-06-29 22:08:43 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
